datasource db {
    provider = "mysql"
    url      = env("DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
}

model Plan {
    id         Int    @id @default(autoincrement())
    name       String
    repeat     Int
    interval   Int
    externalId Int    @unique @map("external_id")

    subscription Subscription[]

    @@map("planos")
}

model Subscription {
    id         Int    @id @default(autoincrement())
    chargeId   Int    @map("charge_id")
    status     String
    total      Int
    parcel     Int
    planId     Int?   @map("plan_id")
    externalId Int    @unique @map("external_id")

    payment Payment[]
    plan    Plan?     @relation(fields: [planId], references: [externalId])

    @@map("Inscricoes")
}

model Payment {
    id                 Int    @id @default(autoincrement())
    subscriptionStatus String
    planId             Int
    interval           Int
    repeat             Int
    chargeId           Int
    chargeStatus       String
    parcel             Int
    total              Int
    firstExecution     String
    subscriptionTotal  Int
    payment            String
    subscriptionId     Int?   @map("subscription_id")

    subscription Subscription? @relation(fields: [subscriptionId], references: [externalId])

    @@map("pagamentos")
}
